# Task Evaluator

This tool is built to evaluate the code generated by generative AI tools for coding such as GitHub Copilot.
In total, there are 4 major components to achieve this:

- Code Generator
- Code Evaluator
- Database & Data Visualization
- Interface (Web Api, Cli or UI)

## Setup

The tool is using multiple external services that need to be set up to gain full functionality.
There are external tools for code generation, code evaluation and data visualization.

### GitHub Copilot

- Add the following .NET User Secrets for TaskEvaluator

```json
{
    "GitHubCopilot": {
        "CompletionsUrl": "https://copilot-proxy.githubusercontent.com/v1/engines/copilot-codex/completions",
        "TokenUrl": "https://api.github.com/copilot_internal/v2/token",
        "UserAgent": "GithubCopilot",
        "UserAgentVersion": "1.138.0",
        "EditorVersion": "vscode/1.84.1",
        "EditorPluginVersion": "copilot/1.138.0",
        "BearerToken": "YOUR_BEARER_TOKEN",
        "Openai-Organization": "github-copilot",
        "Openai-Intent": "copilot-ghost"
    }
}
```

- Replace the Bearer Token with your GitHub Copilot Bearer Token
    - Log into GitHub Copilot with your GitHub Account
    - Find your Bearer Token in the Developer Tools of your Browser
    - Open the Network Tab and filter for "Bearer"
    - Copy the Bearer Token from the Request Header

### SonarQube

- Install Docker
- Start Docker-Engine
- Pull SonarQube Image
    ```bash
    docker pull sonarqube
    ```
- Start SonarQube Container
    ```bash
    docker run -d --name sonarqube -p 9000:9000 sonarqube
    ```
    - Open [localhost:9000](http://localhost:9000)
        - Optionally set custom Environment Variable SONARQUBE_URL
    - Login (default credentials: admin/admin)
    - Set a new password
    - Add the following .NET User Secrets

```json
{
    "SonarQube": {
        "Url": "http://localhost:9000",
        "User": "admin",
        "Password": "YOUR_NEW_PASSWORD"
    }
}
```

## Language Support

Currently, the tool only supports C# as a programming language.

## Running a Task Set

- Create a directory which contains your task set
- Add the path to the directory to your .NET User Secrets
```json
{
    "TaskSet": {
        "DirectoryPath": "YOUR_TASK_SET_DIRECTORY_PATH"
    }
}
```

- The directory should have the following structure:
  - [Language]
    - [TaskGuid]
      - File including the name "Program" for the source code
      - File including the name "UnitTest" for the unit tests
- 
- Here an example
    - CSharp
        - 4c79b244-f3f5-420a-b60f-4a3ac1b53952
            - Program.cs
            - UnitTests.cs
        - eb48e72b-599d-45d2-a472-f50ca4cb955c
            - Program.cs
            - UnitTest
        - 747ddfa6-a303-4b2d-8dd7-ddacf4482412
            - MyProgram
            - UnitTests
        - ...
    - ...